(window.webpackJsonppagination=window.webpackJsonppagination||[]).push([[0],{17:function(e,n,t){e.exports=t(29)},22:function(e,n,t){},23:function(e,n,t){},29:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),o=t(12),s=t.n(o),r=(t(22),t(3)),c=t(4),l=t(6),m=t(5),u=t(7),d=(t(23),t(1)),p=t(2);function v(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 50px 0;\n  border-bottom: 1px solid #ccc;\n  .select {\n    padding: 0 12px;\n    height: 30px;\n    font-size: 16px;\n    border: 1px solid #aaa;\n    border-radius: 6px;\n  }\n  .btn {\n    padding: 0 12px;\n    height: 30px;\n    font-size: 16px;\n    border: 1px solid #aaa;\n    border-radius: 6px;\n    cursor: pointer;\n    background-color: #fff;\n    margin-left: 2px;\n  }\n  .search__input {\n    width: 320px;\n    height: 30px;\n    padding: 0 12px;\n    font-size: 16px;\n    border: 1px solid #aaa;\n    border-radius: 6px;\n    &:focus {\n      outline: none;\n    }\n  }\n"]);return v=function(){return e},e}var h=p.a.div(v()),f=function(e){var n=e.onShowAllMovies,t=e.onShowAllSessions,a=e.search,o=e.onInput,s=e.onSelect,r=e.onFindMovie,c=e.onSearchById,l=e.onSearchSessionById;return i.a.createElement(h,null,i.a.createElement("div",{style:{marginBottom:"10px"}},i.a.createElement("input",{className:"search__input",type:"text",placeholder:"Search...",value:a,onChange:o,onFocus:function(e){return e.target.value=""}})),i.a.createElement("div",null,i.a.createElement("select",{className:"select",defaultValue:"0",onChange:s},i.a.createElement("option",{value:"0"},"Action"),i.a.createElement("option",{value:"1"},"Adventures"),i.a.createElement("option",{value:"2"},"Comedy"),i.a.createElement("option",{value:"3"},"Drama"),i.a.createElement("option",{value:"4"},"Horror"),i.a.createElement("option",{value:"5"},"Westerns")),i.a.createElement("button",{className:"btn",onClick:r},"Search movie"),i.a.createElement("button",{className:"btn",onClick:c,style:{marginLeft:"10px"}},"Get movie by id"),i.a.createElement("button",{className:"btn",onClick:l},"Get sessions by id"),i.a.createElement("button",{className:"btn",onClick:n,style:{marginLeft:"10px"}},"Get all movies"),i.a.createElement("button",{className:"btn",onClick:t},"Get all movies sessions")))};function _(){var e=Object(d.a)(["\n  .movie {\n    padding: 50px 30px;\n    max-width: 800px;\n    margin: 0 auto;\n    display: flex;\n    &__info {\n      margin-right: 10px;\n    }\n    &__title {\n      max-width: 300px;\n      text-transform: uppercase;\n      font-weight: bold;\n      margin-bottom: 10px;\n    }\n    &__img {\n      border-radius: 8px;\n      width: 300px;\n      height: 400px;\n      object-fit: cover;\n      display: block;\n    }\n    &__descr {\n      margin-top: 21px;\n      font-size: 14px;\n      color: #666;\n    }\n  }\n"]);return _=function(){return e},e}function g(){var e=Object(d.a)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-gap: 20px;\n  padding: 50px 30px;\n  max-width: 1180px;\n  margin: 0 auto;\n  .movies__item {\n    display: flex;\n    flex-direction: column;\n    &__title {\n      text-transform: uppercase;\n      font-weight: bold;\n      margin-bottom: 10px;\n    }\n    &__img {\n      border-radius: 8px;\n      width: 100%;\n      height: 300px;\n      object-fit: cover;\n      display: block;\n      margin-bottom: 10px;\n    }\n    &__descr {\n      font-size: 14px;\n      color: #666;\n    }\n  }\n"]);return g=function(){return e},e}var x=p.a.div(g()),b=p.a.div(_()),E=function(e){var n=e.moviesList;return 0===n.length?i.a.createElement(x,null,"No movies found..."):Array.isArray(n)?i.a.createElement(x,null,n.map(function(e,n){return i.a.createElement("div",{className:"movies__item",key:n},i.a.createElement("div",{className:"movies__item__title"},e.name),i.a.createElement("img",{className:"movies__item__img",src:e.pictureLink,title:e.name,alt:e.name}),i.a.createElement("div",{className:"movies__item__descr"},e.description))})):i.a.createElement(b,null,i.a.createElement("div",{className:"movie"},i.a.createElement("div",{className:"movie__info"},i.a.createElement("div",{className:"movie__title"},n.name),i.a.createElement("img",{className:"movie__img",src:n.pictureLink,title:n.name,alt:n.name})),i.a.createElement("div",{className:"movie__descr"},n.description)))};function y(){var e=Object(d.a)(["\n  padding: 50px 30px;\n  max-width: 1180px;\n  margin: 0 auto;\n  .session {\n    & + .session {\n      margin-top: 20px;\n    }\n  }\n  .movie__title {\n    text-transform: uppercase;\n    font-weight: bold;\n    margin-bottom: 10px;\n  }\n  .places {\n    display: grid;\n    grid-template-columns: repeat(5, 1fr);\n  }\n  .place {\n    display: flex;\n    flex-wrap: wrap;\n  }\n  .row {\n    padding: 5px;\n  }\n"]);return y=function(){return e},e}var S=p.a.div(y()),w=function(e){function n(e){var t;Object(r.a)(this,n),(t=Object(l.a)(this,Object(m.a)(n).call(this,e)))._handleOrder=function(e){var n=e.target.dataset;t.props.onBookTicket(n)},t.state={movies:{}};var a=t.props.sessionsList;return Array.isArray(a)?a.map(function(e){return fetch("https://cinema-api-test.herokuapp.com/movies?movie_id=".concat(e.movie_id)).then(function(e){return e.json()}).then(function(n){var a=t.state.movies;a[e.movie_id]=n.name,t.setState({movies:a})})}):fetch("https://cinema-api-test.herokuapp.com/movies?movie_id=".concat(a.movie_id)).then(function(e){return e.json()}).then(function(e){var n=t.state.movies;n[a.movie_id]=e.name,t.setState({movies:n})}),t}return Object(u.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this,n=this.props.sessionsList;return Array.isArray(n)?i.a.createElement(i.a.Fragment,null,i.a.createElement(S,null,n.map(function(n,t){return i.a.createElement("div",{className:"session",key:t},i.a.createElement("div",{className:"movie__title"},e.state.movies[n.movie_id]),i.a.createElement("div",{className:"places"},n.places.map(function(t,a){return i.a.createElement("div",{className:"place",key:a},t.map(function(t,a){return i.a.createElement("div",{className:"row",key:a},"Position: ",t.position," ",i.a.createElement("button",{onClick:e._handleOrder,"data-movie-id":n.movie_id,"data-row-id":t._id,"data-position":t.position,"data-is-free":t.isFree},"Order"))}))})))}))):i.a.createElement(S,null,i.a.createElement("div",{className:"session"},i.a.createElement("div",{className:"movie__title"},this.state.movies[n.movie_id]),i.a.createElement("div",{className:"places"},n.places.map(function(n,t){return i.a.createElement("div",{className:"place",key:t},n.map(function(n,t){return i.a.createElement("div",{className:"row",key:t},"Position: ",n.position," ",i.a.createElement("button",{onClick:e._handleOrder},"Order"))}))}))))}}]),n}(a.Component),k=function(e){function n(){var e,t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=Object(l.a)(this,(e=Object(m.a)(n)).call.apply(e,[this].concat(i)))).state={url:"https://cinema-api-test.herokuapp.com",search:"",genres:"0",moviesList:"",sessionsList:""},t._handleInput=function(e){var n=e.target.value;t.setState({search:n})},t._handleSelect=function(e){var n=e.target.value;t.setState({genres:n})},t._findMovie=function(){var e=t.state,n=e.url,a=e.search,i=e.genres;t.setState({search:"",moviesList:null,sessionsList:null}),fetch("".concat(n,"/movies/find?name=").concat(a,"&genres=").concat(i)).then(function(e){return e.json()}).then(function(e){t.setState({moviesList:e})}).catch(function(e){return console.error(e)})},t._showAllMovies=function(){var e=t.state.url;t.setState({search:"",moviesList:null,sessionsList:null}),fetch("".concat(e,"/movies")).then(function(e){return e.json()}).then(function(e){t.setState({moviesList:e})}).catch(function(e){return console.error(e)})},t._showAllSessions=function(){var e=t.state.url;t.setState({search:"",moviesList:null,sessionsList:null}),fetch("".concat(e,"/movieShows")).then(function(e){return e.json()}).then(function(e){t.setState({sessionsList:e})}).catch(function(e){return console.error(e)})},t._searchById=function(){var e=t.state,n=e.url,a=e.search;if(!a)return!1;t.setState({search:"",moviesList:null,sessionsList:null}),fetch("".concat(n,"/movies?movie_id=").concat(a)).then(function(e){return e.json()}).then(function(e){t.setState({moviesList:e})}).catch(function(e){return console.error(e)})},t._searchSessionById=function(){var e=t.state,n=e.url,a=e.search;if(!a)return!1;t.setState({search:"",moviesList:null,sessionsList:null}),fetch("".concat(n,"/movieShows?movie_id=").concat(a)).then(function(e){return e.json()}).then(function(e){t.setState({sessionsList:e})}).catch(function(e){return console.error(e)})},t._bookTicket=function(e){var n=e.movieId,a=e.rowId,i=e.position,o=e.isFree,s=t.state.url,r={movieShow_id:n,row_id:a,place_position:i,isFree:o};fetch("".concat(s,"/bookingPlace"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){console.log(e)}).catch(function(e){return console.error(e)})},t}return Object(u.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.state,n=e.search,t=e.moviesList,a=e.sessionsList;return i.a.createElement(i.a.Fragment,null,i.a.createElement(f,{search:n,onInput:this._handleInput,onSelect:this._handleSelect,onFindMovie:this._findMovie,onShowAllMovies:this._showAllMovies,onShowAllSessions:this._showAllSessions,onSearchById:this._searchById,onSearchSessionById:this._searchSessionById}),t&&i.a.createElement(E,{moviesList:t}),a&&i.a.createElement(w,{sessionsList:a,onBookTicket:this._bookTicket}))}}]),n}(a.Component);s.a.render(i.a.createElement(k,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.ea116aef.chunk.js.map